version: '3'
services:
#  registry-service:
#    build:
#        context: ./service-registry
#        dockerfile: Dockerfile
#    ports:
#      - 8080:8080
#  auth-service:
#    build:
#        context: ./service-auth
#        dockerfile: Dockerfile
#    ports:
#        - 8081:0
#    depends_on:
#      registry-service:
#        condition: service_healthy
#      tokens-database:
#        condition: service_healthy
#  users-service:
#    build:
#        context: ./service-user
#        dockerfile: Dockerfile
#    ports:
#        - 8082:0
#    depends_on:
#      registry-service:
#        condition: service_healthy
#      users-database:
#        condition: service_healthy
  users-database:
    image: postgres:12
    restart: always
    ports:
      - 5432:5432
    environment:
      POSTGRES_DB: usersControl
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: admin
  tokens-database:
    image: postgres:12
    restart: always
    ports:
      - 5400:5432
    environment:
      POSTGRES_DB: tokensControl
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: admin
  tokens-redis:
    image: redis:latest
    restart: always
    ports:
      - 6379:6379
    volumes:
      - cache:/data

volumes:
  cache:
    driver: local
